#N canvas 431 63 622 632 10;
#X declare -lib Gem -lib pdp -lib gridflow -lib mpc;
#X msg 364 389 put_at \$1 0 0 0;
#X obj 241 474 #join 2;
#X obj 241 276 t a a;
#X obj 241 370 # +;
#X obj 241 322 t b a;
#X obj 256 404 r maxdelay;
#X obj 418 197 s maxdelay;
#X obj 43 200 r maxdelay;
#X msg 70 273 8 \$1;
#X obj 70 295 -;
#N canvas 139 189 142 238 log_2 0;
#X obj 52 90 log;
#X msg 52 67 2;
#X msg 52 111 1 \$1;
#X obj 52 132 /;
#X obj 25 126 log;
#X obj 25 155 *;
#X obj 52 42 loadbang;
#X obj 25 11 inlet;
#X obj 25 179 outlet;
#X connect 0 0 2 0;
#X connect 1 0 0 0;
#X connect 2 0 3 0;
#X connect 3 0 5 1;
#X connect 4 0 5 0;
#X connect 5 0 8 0;
#X connect 6 0 1 0;
#X connect 7 0 4 0;
#X restore 70 250 pd log_2;
#X obj 241 345 #store;
#X obj 256 426 - 1;
#X obj 8 114 openpanel;
#X obj 8 78 bng 20 250 50 0 empty empty empty 17 7 0 10 -204786 -258113
-1;
#X obj 43 223 t b a;
#X obj 241 449 # &;
#X obj 241 529 #out window \, title t-morph;
#N canvas 318 302 217 230 cursor_dim 0;
#X obj 14 91 #for (0 0) (480 640) (1 1);
#X obj 14 69 t b a;
#X obj 14 113 outlet;
#X obj 14 39 r height*width;
#X connect 0 0 2 0;
#X connect 1 0 0 0;
#X connect 1 1 0 1;
#X connect 3 0 1 0;
#X restore 280 449 pd cursor_dim;
#X obj 288 314 r mask;
#X obj 8 408 s mask;
#X msg 8 137 open \$1 \, bang;
#X obj 43 374 #out window \, title mask;
#N canvas 347 203 240 275 cursor_pos 0;
#X obj 47 163 f;
#X obj 90 137 + 1;
#X obj 123 136 r maxdelay;
#X obj 47 138 b;
#X obj 47 103 inlet;
#X obj 47 196 outlet;
#X obj 90 169 mod;
#X connect 0 0 1 0;
#X connect 0 0 5 0;
#X connect 1 0 6 0;
#X connect 2 0 6 1;
#X connect 3 0 0 0;
#X connect 4 0 3 0;
#X connect 6 0 0 1;
#X restore 241 249 pd cursor_pos;
#X obj 418 104 hradio 20 1 1 7 empty empty empty 0 -8 0 10 -204786
-258113 -1 0;
#X obj 418 130 + 2;
#X obj 418 175 pow;
#X msg 418 153 2 \$1;
#X obj 241 505 #store (32 240 320 3 b #);
#X text 418 91 4___8__16_32_64_128_256;
#X obj 8 269 #in;
#N canvas 326 76 509 339 check_mask_dim 0;
#X obj 75 56 #dim;
#X obj 75 101 #to_list;
#X obj 19 13 inlet;
#X obj 174 230 print t-morph;
#X obj 109 153 sel 1;
#X msg 174 194 ERROR: Mask has more than 1 channels. Is it really greyscale?
;
#X obj 75 126 list split 2;
#X msg 109 185 1;
#X msg 136 185 0;
#X obj 19 217 spigot;
#X obj 19 34 t a a;
#X obj 19 308 outlet;
#X obj 114 261 s height*width;
#X obj 75 218 spigot;
#X obj 75 307 outlet;
#X msg 75 282 size h\$1 w\$2;
#X connect 0 0 1 0;
#X connect 1 0 6 0;
#X connect 2 0 10 0;
#X connect 4 0 7 0;
#X connect 4 1 5 0;
#X connect 4 1 8 0;
#X connect 5 0 3 0;
#X connect 6 0 13 0;
#X connect 6 1 4 0;
#X connect 7 0 9 1;
#X connect 7 0 13 1;
#X connect 8 0 9 1;
#X connect 8 0 13 1;
#X connect 9 0 11 0;
#X connect 10 0 9 0;
#X connect 10 1 0 0;
#X connect 13 0 12 0;
#X connect 13 0 15 0;
#X connect 15 0 14 0;
#X restore 8 319 pd check_mask_dim;
#X obj 8 385 # >>;
#X text 7 61 1;
#X obj 241 78 tgl 20 0 empty empty empty 17 7 0 10 -204786 -258113
-1 0 1;
#X text 241 61 4;
#X text 264 81 <- start/stop movie;
#X text 418 76 set "deepness" of time morph;
#X text 417 61 3;
#X obj 107 346 display;
#N canvas 724 310 544 466 check_movie_dim 0;
#X obj 46 57 #dim;
#X obj 46 78 #to_list;
#X obj 19 13 inlet;
#X obj 19 401 outlet;
#X obj 19 35 t a a;
#X obj 19 360 spigot;
#X obj 117 155 r height*width;
#X obj 117 178 unpack f f;
#X obj 46 178 unpack f f;
#X obj 91 243 ==;
#X obj 46 240 ==;
#X obj 46 267 +;
#X obj 46 290 sel 2;
#X msg 46 316 1;
#X msg 73 316 0;
#X obj 46 101 t a a;
#X obj 73 146 outlet;
#X msg 73 123 size h\$1 w\$2;
#X obj 119 433 print t-morph;
#X msg 119 397 ERROR: Mask size (h\$3 w\$4) does not match movie size
(h\$1 w\$2);
#X obj 119 374 pack f f f f;
#X obj 119 351 f;
#X obj 119 322 b;
#X connect 0 0 1 0;
#X connect 1 0 15 0;
#X connect 2 0 4 0;
#X connect 4 0 5 0;
#X connect 4 1 0 0;
#X connect 5 0 3 0;
#X connect 6 0 7 0;
#X connect 7 0 10 1;
#X connect 7 0 20 2;
#X connect 7 1 9 1;
#X connect 7 1 20 3;
#X connect 8 0 10 0;
#X connect 8 0 21 1;
#X connect 8 1 9 0;
#X connect 8 1 20 1;
#X connect 9 0 11 1;
#X connect 10 0 11 0;
#X connect 11 0 12 0;
#X connect 12 0 13 0;
#X connect 12 1 14 0;
#X connect 12 1 22 0;
#X connect 13 0 5 1;
#X connect 14 0 5 1;
#X connect 15 0 8 0;
#X connect 15 1 17 0;
#X connect 17 0 16 0;
#X connect 19 0 18 0;
#X connect 20 0 19 0;
#X connect 21 0 20 0;
#X connect 22 0 21 0;
#X restore 241 195 pd check_movie_dim;
#X obj 346 247 display;
#N canvas 249 438 199 271 adjust_buffer_size 0;
#X msg 39 161 1 b #;
#X obj 12 182 # + 0;
#X obj 39 141 loadbang;
#X obj 12 92 t a b;
#X msg 121 142 reassign;
#X obj 12 237 outlet;
#X obj 12 12 r height*width;
#X obj 87 39 r maxdelay;
#X obj 12 66 list append 0;
#X msg 12 121 \$3 \$1 \$2 3 b #;
#X connect 0 0 1 1;
#X connect 1 0 5 0;
#X connect 2 0 0 0;
#X connect 3 0 9 0;
#X connect 3 1 4 0;
#X connect 4 0 5 0;
#X connect 6 0 8 0;
#X connect 7 0 8 1;
#X connect 8 0 3 0;
#X connect 9 0 1 0;
#X restore 403 473 pd adjust_buffer_size;
#X obj 17 249 spigot;
#X obj 8 160 t a b;
#X msg 33 180 1;
#X obj 0 0 doc_demo;
#X text 32 80 <- load mask image;
#X text 49 93 (single-channel/greyscale);
#X text 5 29 Copyright 2010 Roman Haefeli;
#X text 474 126 (unit: frames);
#N canvas 141 213 425 343 ABOUT 0;
#X text 15 13 T-MORPH;
#X text 16 22 -------;
#X text 16 153 In this patch \, the projection plane is not plane (with
the plane built by the X- and Y-Axis) \, but distorted along the Z-Axis.
The brightness of a certain pixel of the mask image defines the amount
of the distortion: The darker a pixel in the mask is the more the pixel
at the specified position in the movie is delayed. If there is no movement
in the movie \, there is no effect.;
#X text 16 39 Think of a movie as a big cuboid of pixels. The horizontal
axis represents the frame width \, the vertical axis the frame height
\, and the Z-axis the frame numbers. Recording a movie could be seen
as writing one frame behind the next along the Z-axis into that cuboid.
Similarly \, playing a movie could be seen as a plane (the projection
we see) travelling along the Z-axis \, hitting one frame after another.
;
#X text 18 273 http://www.romanhaefeli.net/projekte/out_of_frame;
#X restore 496 284 pd ABOUT;
#X obj 388 359 #cast b;
#X obj 241 550 fps;
#X text 298 140 2 select source;
#X msg 241 571 \$1 fps;
#X obj 241 593 display;
#X obj 9 443 import Gem pdp gridflow mpc;
#X obj 241 117 mpc.gf.setfps 30;
#X obj 241 156 mpc.gf.source;
#X connect 0 0 28 1;
#X connect 1 0 28 0;
#X connect 2 0 4 0;
#X connect 2 1 0 0;
#X connect 3 0 16 0;
#X connect 4 0 11 0;
#X connect 4 1 3 1;
#X connect 5 0 12 0;
#X connect 7 0 15 0;
#X connect 8 0 9 0;
#X connect 9 0 32 1;
#X connect 10 0 8 0;
#X connect 11 0 3 0;
#X connect 12 0 16 1;
#X connect 13 0 21 0;
#X connect 14 0 13 0;
#X connect 15 0 43 0;
#X connect 15 1 10 0;
#X connect 16 0 1 0;
#X connect 17 0 53 0;
#X connect 18 0 1 1;
#X connect 19 0 11 1;
#X connect 21 0 44 0;
#X connect 23 0 2 0;
#X connect 24 0 25 0;
#X connect 25 0 27 0;
#X connect 26 0 6 0;
#X connect 27 0 26 0;
#X connect 28 0 17 0;
#X connect 30 0 31 0;
#X connect 31 0 32 0;
#X connect 31 0 22 0;
#X connect 31 1 39 0;
#X connect 32 0 20 0;
#X connect 34 0 58 0;
#X connect 40 0 23 0;
#X connect 40 0 52 0;
#X connect 40 1 41 0;
#X connect 42 0 28 1;
#X connect 43 0 30 0;
#X connect 44 0 30 0;
#X connect 44 1 45 0;
#X connect 45 0 43 1;
#X connect 52 0 28 1;
#X connect 53 0 55 0;
#X connect 55 0 56 0;
#X connect 58 0 59 0;
#X connect 59 0 40 0;
