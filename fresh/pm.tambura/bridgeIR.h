inline float convolveBridgeIR(float input)
{
  static const int irlength = 2048;
  //IR taken from the website to accompany this DAFX paper: van Walstijn, M., Bridges, J., & Mehes, S. (2016). A Real-Time Synthesis Oriented Tanpura Model. In 19th International Conference on Digital Audio Effects (DAFx-16). (pp. 175-182). (International Conference on Digital Audio Effects )
  //http://www.socasites.qub.ac.uk/mvanwalstijn/dafx16a/
  static const float ir[irlength] = {0.000244141,-9.15527e-05,6.10352e-05,-0.000366211,0.000701904,-0.000640869,0.000518799,-0.000671387,-0.000518799,0.000915527,-0.00170898,-6.10352e-05,0.000823975,-0.00128174,-0.000335693,0.00088501,-0.000732422,0.00143433,0.000183105,-0.00137329,0.00213623,-0.000213623,0.000274658,0.000610352,-0.00125122,0.00106812,0.000213623,-0.0015564,0.00143433,-0.000366211,-0.0017395,0.00109863,0.000457764,-0.00241089,0.00259399,-0.000335693,-0.00289917,0.00595093,-0.00518799,0.0293274,-0.0289001,0.012146,0.000457764,-0.00274658,0.0486145,-0.0972595,0.146698,-0.470795,-0.290985,0.584625,-0.245636,0.429871,0.382751,-0.589874,0.409088,-0.415253,-0.990021,-0.269714,-0.526794,0.104309,-0.166016,-0.591614,0.226105,0.0782776,0.0130615,0.350342,0.345764,0.259338,0.649719,0.653656,0.306152,0.727081,0.401642,0.00744629,0.154541,-0.0482788,-0.295837,-0.282745,-0.0119934,-0.234985,-0.0380249,0.139496,-0.464355,-0.275848,0.00250244,-0.146362,0.045166,0.0943604,0.175354,-0.0421753,-0.628235,-0.167938,0.113129,0.0447693,0.350891,0.0797119,-0.0396729,0.0495911,-0.145813,-0.104828,-0.0367432,-0.203125,0.13916,0.478333,0.188873,-0.0364685,-0.26236,-0.272003,-0.182281,-0.216156,0.0442505,0.123199,0.03302,0.0928345,0.0175476,-0.174347,-0.341461,-0.294464,-0.103424,0.0685425,0.283813,0.25589,0.268799,0.38028,0.154297,0.0688171,0.10025,0.00231934,0.0323792,0.079071,-0.140839,-0.24115,-0.078949,-0.0728455,-0.0419617,-0.0594482,-0.0360718,0.105408,0.0708923,0.0739136,0.0500488,-0.0516052,-0.0783691,-0.0685425,-0.0653992,-0.04599,0.0585938,0.106445,0.071106,0.0627136,0.021637,-0.116364,-0.135803,-0.101837,-0.130585,0.0595398,0.0566101,-0.0192261,0.118408,0.0379333,-0.0305786,-0.0337219,-0.0924377,-0.145935,-0.118835,-0.0170288,-0.0131836,-0.108124,-0.195587,-0.0901489,-0.0176392,-0.076355,0.00204468,0.0735168,0.0457458,0.0645142,0.138336,0.104645,-0.0166016,0.0209045,0.111023,0.142883,0.157562,0.0797119,0.0246277,0.0183105,-0.0134277,0.022522,0.0464172,0.0101318,0.0594177,0.111938,0.0848694,0.0589294,0.0465698,0.0259094,0.0658264,0.126343,0.136566,0.157715,0.106354,-0.0387573,-0.191925,-0.20929,-0.224487,-0.287689,-0.161682,-0.0678406,-0.00634766,0.0811462,0.0632324,0.0466614,0.0421143,0.0454712,0.0388794,0.0109253,0.0185242,-0.0174561,-0.0898132,-0.0944824,-0.111816,-0.132751,-0.0992432,-0.0553589,-0.0449219,-0.102356,-0.147369,-0.139038,-0.109772,-0.0854187,-0.0443115,0.0248718,0.0541992,0.105225,0.16568,0.126251,0.0593262,0.0155029,0.0198364,0.0607605,0.0734863,0.0979919,0.113312,0.0882568,0.0524292,-0.00274658,-0.0456238,-0.0507507,-0.02948,0.0230713,0.0889282,0.126038,0.132294,0.121765,0.0689697,-0.0045166,-0.0769653,-0.0890198,-0.0693665,-0.0743408,-0.0254211,-0.000518799,-0.0210266,-0.0249023,-0.0105286,-0.00158691,0.00244141,0.0267639,0.0611877,0.0853577,0.0852966,0.106354,0.0896301,0.0714722,0.0786743,0.00363159,-0.10614,-0.14032,-0.117401,-0.150177,-0.15741,-0.143829,-0.11261,-0.0609741,-0.0675964,-0.0250549,-0.0291748,-0.052887,-0.0693665,-0.0871582,-0.098877,-0.160797,-0.0775452,0.00186157,0.055603,0.14859,0.121216,0.110291,0.130951,0.112,0.0733643,0.0368958,0.0410461,0.0433655,0.0641785,0.0706177,0.00872803,-0.023407,-0.021759,-0.00476074,0.0141602,0.0300903,0.0496216,0.0482178,0.0610046,0.0682373,0.0397034,0.0169067,0.0161133,-0.019165,-0.0209961,-0.00146484,-0.0288086,-0.0325623,-0.0744934,-0.0770569,-0.0290527,-0.0175781,-0.00338745,0.00256348,0.035675,0.0472107,0.0559082,0.0814819,0.0536194,0.023468,0.0167847,0.0107117,0.00949097,-0.0140076,-0.0648804,-0.0722961,-0.0911255,-0.121338,-0.102234,-0.12265,-0.132935,-0.0955811,-0.0673218,-0.0420837,-0.04422,-0.0483398,-0.0363464,-0.0192566,0.0120239,0.0475464,0.074585,0.0817871,0.0878296,0.0885925,0.080719,0.0643921,0.0291443,0.0032959,0.00457764,0.0233459,0.0263672,0.0162048,0.0163269,0.0291748,0.0356445,0.0213318,0.0151062,0.00930786,-0.00823975,-0.0142517,-0.00311279,0.0093689,0.0211487,0.0291443,0.0202026,0.0273132,0.0370483,0.0185852,0.0186768,0.0142822,0.00582886,0.0319519,0.0473022,0.057251,0.0556946,0.0508728,0.043335,-0.00457764,-0.0274048,-0.0394897,-0.0643005,-0.0691223,-0.0778809,-0.0748901,-0.0840149,-0.0970764,-0.0762939,-0.0775757,-0.0786133,-0.0702209,-0.0629272,-0.0303955,-0.0184021,-0.00671387,0.0083313,0.0109253,0.0352478,0.0486755,0.0441284,0.0323486,0.0181274,0.023468,0.0187988,-0.00430298,0.00369263,0.0162048,0.00973511,0.0194397,0.0177917,0.0020752,-0.000640869,-0.0219116,-0.0315552,0.00494385,0.00195312,-0.0105286,0.0143127,0.0100098,0.0138855,0.0177917,0.0114136,0.0311584,0.0464478,0.0681152,0.0892639,0.105957,0.112366,0.0986633,0.0726013,0.0382385,0.0202942,-0.0114746,-0.0344238,-0.036377,-0.0475159,-0.0496521,-0.0682373,-0.0897522,-0.0804138,-0.0619507,-0.0562744,-0.0423279,-0.0159607,-0.006073,-0.00628662,-0.0151367,-0.0194092,-0.0101013,-0.014679,-0.0268555,-0.0215454,-0.015625,-0.0198364,-0.00723267,-0.00180054,-0.0157471,-0.00238037,0.0119629,0.01297,0.0337524,0.0257568,-0.0128174,-0.0171204,-0.0107422,-0.0264587,-0.0339966,-0.0287781,-0.0358276,-0.034668,-0.0224609,-0.0115051,0.00415039,0.0101624,0.014679,0.0289917,0.0526123,0.0613098,0.0597229,0.0586243,0.0531006,0.0583191,0.0510254,0.0430603,0.0361938,0.0340271,0.0391541,0.0254822,0.0176392,0.00921631,0.00668335,0.00994873,-0.00595093,-0.0210571,-0.0259705,-0.0269165,-0.0255432,-0.0192261,-0.0223083,-0.0279541,-0.0112915,-0.00280762,-0.0123291,-0.0143433,-0.0134583,-0.0150757,-0.00683594,0.00256348,-0.0102844,-0.0154724,-0.01474,-0.0257874,-0.0103455,0.00628662,-0.00457764,-0.0186157,-0.0274048,-0.0298462,-0.0289917,-0.0353088,-0.0376587,-0.0213318,-0.0201721,-0.0235901,-0.000396729,-0.00497437,-0.0168152,-0.00152588,-0.0169678,-0.0159912,0.0115967,-0.00115967,0.00497437,0.0320435,0.0245972,0.0220337,0.036377,0.0338135,0.0285339,0.0395813,0.0513916,0.0587158,0.0515137,0.02948,0.0173645,0.00445557,-0.00613403,-0.00949097,-0.020752,-0.018219,-0.0127563,-0.00982666,-0.00335693,0.00411987,0.0155334,0.0128174,0.0229492,0.0281372,0.0129395,0.0189819,0.0170593,0.00186157,0.00479126,0.00540161,-0.00680542,-0.00253296,0.000244141,-0.0116272,-0.0100708,-0.0203857,-0.0277405,-0.0188599,-0.0274658,-0.0327454,-0.0396118,-0.0497742,-0.0405579,-0.0302429,-0.0271912,-0.0196228,-0.0114746,-0.0120544,-0.0128784,-0.00866699,-0.00509644,-0.00466919,-0.000671387,0.00497437,0.00939941,0.0214844,0.0278931,0.0210876,0.0192566,0.0198669,0.0106812,0.00808716,0.0146179,0.00942993,0.00601196,0.00582886,0.00213623,0.00436401,-0.0158691,-0.0227356,-0.00485229,-0.0215759,-0.0111084,0.0207214,0.0145569,0.025116,0.0427856,0.0320435,0.0255432,0.0235291,0.00518799,0.00177002,0.0159912,0.0170898,0.0175781,0.0206909,0.0190735,0.0221252,0.019104,0.00418091,0.00454712,-0.000274658,-0.0184326,-0.0263672,-0.0331116,-0.0293274,-0.0328674,-0.0357971,-0.0274353,-0.0349121,-0.0279541,-0.0144653,-0.0196228,-0.0101013,0.000701904,-0.00259399,0.00360107,0.00534058,-0.000427246,-0.00601196,-0.0118713,-0.0161743,-0.0174561,-0.0107117,-0.0122986,-0.00753784,0.00540161,-0.00778198,-0.01297,-0.0012207,-0.0078125,-0.003479,0.0148926,0.0186462,0.0281067,0.0343018,0.0221252,0.0202026,0.0170593,0.00683594,0.0111694,0.0107727,0.00534058,0.0158691,0.0185852,0.00976562,0.0113525,0.0022583,-0.0119324,-0.00778198,-0.00466919,0.00445557,0.0196228,0.0204773,0.0261841,0.0280457,0.0130615,-0.00140381,-0.00811768,-0.00482178,-0.00158691,0.00158691,-0.000305176,-0.0134583,-0.0148621,-0.0177917,-0.028595,-0.0193176,-0.0163574,-0.0135803,-0.00350952,-0.00961304,-0.0106201,-0.0168457,-0.0180664,-0.0149841,-0.0176697,-0.00509644,-0.0027771,-0.00872803,-0.00997925,-0.0125732,-0.0174255,-0.0224915,-0.0194092,-0.0172424,-0.0147705,-0.00387573,0.00534058,0.012146,0.0138855,0.00735474,0.00302124,-0.000915527,-0.00296021,-0.00588989,0.00137329,0.015564,0.00558472,0.00698853,0.0199585,0.00732422,-0.00112915,0.0114746,0.0231323,0.019928,0.0272827,0.035675,0.0222473,0.0174561,0.0152893,0.00650024,0.000396729,-0.00222778,0.00427246,0.00970459,0.0139465,0.0167236,0.0188293,0.0181885,0.0118103,0.0134277,0.00436401,-0.0098877,-0.0111084,-0.0229187,-0.0253296,-0.0174255,-0.0321655,-0.0379333,-0.0281067,-0.0236816,-0.0148315,-0.0128479,-0.0222778,-0.0164185,-0.00778198,-0.00900269,-0.00222778,-0.00415039,-0.00466919,0.00714111,0.00866699,0.00488281,0.00375366,0.00762939,0.0156555,0.0181885,0.00518799,-0.0111084,-0.0155334,-0.017395,-0.0204773,-0.0171204,-0.0125427,-0.0122681,-0.00732422,-0.00164795,0.000274658,0.0065918,0.00775146,0.0020752,0.00387573,0.00375366,0.00119019,0.00106812,0.00628662,0.0144653,0.0133667,0.0186768,0.022583,0.026886,0.0374451,0.0305786,0.0266113,0.0284424,0.0221252,0.0145569,0.00338745,-0.00161743,-0.000244141,-0.00445557,-0.0106812,-0.01474,-0.0138245,-0.0151978,-0.0209351,-0.0218811,-0.0239868,-0.0184937,-0.00650024,-0.00286865,-0.000305176,-0.00012207,-0.00665283,-0.00918579,-0.00323486,-0.00854492,-0.0169678,-0.00811768,-0.006073,-0.00698853,-0.00524902,-0.0098877,-0.00354004,-0.00271606,-0.0100098,-0.00958252,-0.00585938,0.00286865,0.00344849,-0.0039978,-0.00827026,-0.00762939,-0.00518799,-0.00991821,-0.00982666,-0.00708008,-0.00527954,0.00152588,-0.00375366,-0.00585938,0.00115967,0.00805664,0.0184021,0.0207825,0.0209045,0.0166321,0.0211792,0.0288391,0.0198975,0.0140991,0.000701904,0.012207,0.0337219,0.00991821,-0.00491333,-0.0090332,-0.00970459,0.00408936,0.00897217,0.00765991,-0.00970459,-0.0071106,0.00848389,-0.00421143,-0.000762939,-0.0010376,-0.0144043,0.003479,0.0120544,-0.0088501,-0.0137329,-0.00286865,-0.000640869,-0.00146484,-0.00134277,-0.00256348,0.00198364,0.00616455,0.00204468,0.00100708,-0.0116272,-0.0234985,-0.0145569,-0.0135498,-0.0158997,-0.0106201,-0.00827026,-0.0211487,-0.0246277,-0.0157471,-0.019043,-0.0120544,-0.0114136,-0.0154724,-0.00354004,0.000732422,0.000946045,0.00363159,-0.00128174,-0.00222778,0.00817871,0.0232544,0.0233459,0.00527954,0.0110168,0.0172729,0.00830078,0.00872803,-0.0039978,-0.0131226,0.000549316,0.0106201,0.0120239,0.0155334,0.0115967,0.00582886,0.00338745,0.0010376,0.00012207,-0.00463867,0.000427246,0.010437,0.00900269,0.00131226,0.000213623,0.00131226,0.000854492,0.00476074,0.00268555,0.00109863,0.00396729,0.00424194,-0.00524902,-0.0151978,-0.00518799,-0.000793457,-0.00469971,-0.000152588,-0.00219727,-0.00167847,0.00512695,0.00152588,-0.00762939,-0.00778198,-0.00372314,-0.00738525,-0.00842285,-0.00817871,-0.011261,-0.0145874,-0.0151367,-0.0067749,-0.00982666,-0.0143127,-0.00939941,-0.00689697,-0.000183105,0.00296021,0.00180054,0.00109863,0.00378418,0.0039978,-0.00238037,-0.00296021,0.00421143,0.00918579,0.00262451,-0.00247192,-0.00442505,-0.00799561,-0.00415039,0.00378418,0.00616455,-0.00622559,-0.00701904,0.00683594,0.00695801,0.00933838,0.0122986,0.0111389,0.0198364,0.0169067,0.00491333,0.00512695,0.00393677,0.00289917,0.00149536,-0.000244141,0.00332642,-0.00012207,0.000793457,0.00439453,-0.00228882,-0.00534058,0.00195312,0.00332642,-0.00497437,-0.00473022,0.00152588,0.00198364,-0.00424194,-0.0106812,-0.016449,-0.0120544,0.00186157,-0.00778198,-0.0181274,-0.0100708,-0.00939941,-0.00814819,0.00549316,0.0114746,-0.0126343,-0.0215149,-0.000549316,0.0057373,0.00695801,0.00778198,-0.000274658,-0.00875854,-0.00701904,0.00146484,0,-0.00335693,-0.00909424,-0.015625,-0.00509644,0.00363159,0.00146484,0.00332642,0.00772095,0.0122681,0.0110779,0.00747681,0.0085144,0.00344849,6.10352e-05,0.0135193,0.0183105,0.00796509,0.00421143,0.00341797,0.00531006,-0.00473022,-0.0134277,-0.00177002,-0.00430298,-0.00485229,0.00442505,0.00134277,0.000854492,-0.000732422,-0.00189209,0.00726318,0.00921631,-0.00112915,-0.00723267,-0.00537109,0.00234985,0.00750732,0.00170898,-0.00592041,-0.0150146,-0.0244141,-0.0214233,-0.0050354,-0.000213623,-0.00796509,-0.00305176,0.00326538,0.00476074,0.00762939,0.00378418,-0.00521851,-0.00570679,0.00674438,0.0142517,0.0126038,0.00762939,0.0043335,0.00125122,-0.0134277,-0.0187073,-0.0159912,-0.0181885,-0.00735474,0.00436401,0.00253296,-0.00585938,-0.00979614,-0.0065918,-0.00222778,0.00317383,0.00976562,0.0169678,0.0196838,0.0141602,0.0110168,0.0101318,-0.00289917,-0.00967407,-0.00247192,-0.0065918,-0.00204468,0.0171509,0.0121765,-0.00823975,-0.00640869,0.000183105,-0.0154724,-0.00393677,0.019928,0.010437,0.0111694,0.0119019,-0.00650024,-0.0123291,-0.0100403,-0.0174561,-0.0177612,-0.00201416,0.00469971,0.00558472,0.00973511,0.00537109,-0.00143433,-0.00836182,-0.0101929,-0.00588989,0.00137329,0.0116272,0.0055542,-0.000549316,0.00244141,-0.00259399,-0.00558472,-0.00643921,-0.00802612,-0.00683594,-0.00344849,-0.00344849,-0.00460815,-0.00686646,-0.0111084,-0.00610352,-0.00473022,-0.00521851,-0.00100708,-0.000610352,0.000793457,-0.00012207,0.00418091,0.0088501,0.00335693,-0.00128174,-0.000732422,0.00405884,0.00302124,-0.00143433,-0.0022583,-0.00286865,0.00601196,0.0123596,0.00341797,3.05176e-05,-0.00228882,-0.00354004,0.00726318,0.00775146,0.00314331,0.00311279,-0.000732422,0.000762939,0.00653076,0.00427246,-0.00415039,-0.00402832,0.00366211,0.00195312,-0.00521851,-0.00344849,-0.00112915,-0.00546265,-0.0017395,0.00442505,-0.00146484,0.00335693,0.00946045,-0.00753784,-0.0105896,-0.00164795,-0.00769043,-0.00872803,-0.00396729,-0.00546265,-0.00537109,0.0043335,0.00756836,-0.000976562,-0.00350952,-0.00738525,-0.013855,-0.00692749,0.000274658,-0.00436401,-0.00317383,-0.000823975,-0.00360107,0.000366211,0.00213623,-0.00323486,-0.0057373,0.00262451,0.0114136,0.009552,0.00952148,0.00991821,0.00354004,-0.000762939,-0.00283813,-0.00210571,-0.00283813,-0.00595093,-0.00192261,0.00241089,0.00390625,0.00143433,-0.0062561,-0.0098877,-0.00720215,-0.0043335,0.00167847,0.0105896,0.0130005,0.0114136,0.00692749,-0.00131226,-0.00320435,-6.10352e-05,-0.00210571,0.00439453,0.0117798,0.00375366,0.000793457,-0.0022583,-0.0112305,-0.00808716,-0.00189209,-0.00500488,-0.000640869,0.00967407,0.00784302,0.00405884,0.00161743,-0.00793457,-0.0179138,-0.0184937,-0.011261,-0.00662231,-0.00485229,-0.00393677,-0.00646973,-0.00158691,-0.00463867,-0.0197754,-0.0135193,-0.00088501,0.00817871,0.0188904,0.0168152,0.00857544,0.00195312,-0.00198364,-0.00350952,-0.00411987,-0.000579834,0.0038147,0.00799561,0.012207,0.00296021,-0.00866699,-0.0108032,-0.015686,-0.00927734,0.0015564,-0.00427246,-0.00109863,0.0135193,0.0154114,0.0118103,0.00604248,-0.00164795,-0.000854492,0.00521851,0.00509644,0.00497437,0.00811768,0.00576782,0.00753784,0.00845337,0.00411987,0.00100708,-0.000488281,-0.000396729,-0.00106812,0.00234985,0.000274658,-0.00402832,-0.00274658,-0.00741577,-0.00949097,-0.0032959,-0.000915527,-0.00445557,-0.00610352,-0.0102539,-0.0148315,-0.00973511,-0.00543213,-0.00378418,-0.000427246,0.00131226,0.00448608,0.00814819,0.00695801,-0.000396729,-0.00714111,-0.00695801,-0.00186157,0.00195312,0.00213623,0.00253296,0.000854492,-0.00546265,-0.00601196,-0.00448608,-0.00878906,-0.00698853,-0.00241089,-3.05176e-05,0.00494385,0.00411987,-0.000823975,9.15527e-05,0.00317383,0.00158691,0.000518799,0.00112915,-0.00109863,-0.000305176,0.00354004,0.00604248,0.00372314,0.00186157,0.00631714,0.00567627,0.00311279,0.00598145,0.00561523,-0.000305176,0.000427246,0.00930786,0.00741577,0.00137329,0.00253296,-0.000335693,-0.00198364,-0.00228882,-0.00741577,-0.00668335,-0.0039978,-0.00820923,-0.0120239,-0.00671387,-0.00201416,-0.00482178,-0.000946045,-0.000488281,-0.00662231,-0.00222778,0.00170898,-0.000396729,0.0012207,0.00308228,0.00161743,0.00531006,0.0062561,-0.00283813,-0.00750732,-0.00616455,-0.00372314,3.05176e-05,0.00350952,0.00366211,0.00473022,0.00552368,-0.00198364,-0.00732422,-0.00869751,-0.0106201,-0.00534058,0.0038147,0.00585938,0.00424194,0.0057373,0.00375366,-6.10352e-05,-0.000366211,-0.00469971,-0.00762939,-0.00192261,0.00506592,0.00738525,0.00500488,0.00350952,0.00164795,-0.00100708,-9.15527e-05,-0.000854492,-0.00195312,-0.000305176,0.00262451,0.00704956,0.00814819,0.00601196,0.00466919,0.00112915,-0.00195312,-0.00460815,-0.0112305,-0.0126648,-0.00927734,-0.00549316,-0.00152588,0.000518799,0.000518799,-0.00106812,0.00112915,0.00485229,0.00442505,0.00241089,0.00469971,0.00588989,0.00274658,0.00112915,-0.00189209,-0.00732422,-0.00708008,-0.00308228,-0.0062561,-0.00842285,-0.00680542,-0.00610352,-0.00375366,-0.00262451,0.0020752,0.00619507,0.00302124,-0.000213623,0.00012207,0.00302124,0.00308228,0.000701904,-0.000457764,-0.00326538,-0.0050354,-0.00250244,0.00216675,0.00335693,0.00112915,0.00189209,0.00119019,0.00012207,0.0017395,0.00317383,0.00878906,0.01474,0.0138855,0.00653076,0.000274658,-0.000976562,-0.00152588,-0.00210571,-0.00262451,-0.00436401,-0.00378418,-0.000701904,-0.000305176,-0.000976562,-0.000946045,-0.000579834,-0.00244141,-0.000915527,0.00216675,-0.00216675,-0.00280762,-0.00390625,-0.0065918,-0.00390625,-0.00387573,-0.000976562,0.00152588,-0.00012207,0.000976562,0.000305176,3.05176e-05,-0.00115967,-0.00344849,0.00115967,0.0032959,0.00137329,0.00146484,0.000610352,0.00100708,-0.000518799,-0.00439453,-0.00375366,-0.000366211,-0.000610352,-0.00387573,-0.00387573,-0.00332642,-0.00497437,-0.00662231,-0.00744629,-0.00390625,0.0015564,0.00354004,0.00570679,0.00524902,0.000793457,6.10352e-05,-3.05176e-05,0.00137329,0.00442505,0.00408936,0.0015564,-0.00320435,0.000701904,0.00967407,0.00839233,0.00463867,0.00479126,0.00561523,0.00802612,0.00997925,0.00772095,0.00634766,0.0045166,0.000946045,-0.000305176,-0.00561523,-0.0122375,-0.0108032,-0.00509644,-0.00137329,-0.00341797,-0.0098877,-0.00750732,-0.00131226,-0.00286865,-9.15527e-05,0.00415039,0.000823975,-0.000366211,0.00137329,-0.000488281,-0.00317383,-0.00466919,-0.00299072,0.00213623,0.00360107,0.00119019,-0.00274658,-0.00448608,-0.00216675,-0.00140381,-0.00396729,-0.00662231,-0.00308228,0.00311279,0.00350952,0.000946045,0.000732422,0.00335693,0.00671387,0.00698853,0.00546265,0.00204468,-0.00134277,0.0020752,0.00326538,0.00253296,0.00393677,0.000396729,-9.15527e-05,0.00378418,0.00262451,-0.000396729,-0.00180054,-0.00466919,-0.00323486,0.00213623,0.00500488,0.00808716,0.00445557,-0.00149536,0.000579834,-3.05176e-05,-0.00506592,-0.00537109,-0.00473022,-0.00549316,-0.00167847,0.00115967,-0.00216675,-0.00268555,0.00146484,0.0032959,0.000732422,-0.000823975,0.000976562,0.000579834,-0.000915527,-0.00265503,-0.00418091,-0.00369263,-0.00332642,-0.000640869,0.00140381,0.000213623,0.00161743,0.00323486,0.0010376,-0.00241089,-0.00430298,-0.00463867,-0.00543213,-0.00228882,0.00222778,-0.000244141,-0.00537109,-0.00491333,-0.00244141,-0.00350952,-0.00271606,-0.00271606,0.00106812,0.00918579,0.00723267,0.00570679,0.00860596,0.00527954,0.00231934,0.00302124,-0.000213623,-0.00125122,0.00354004,0.00570679,0.00588989,0.00479126,0.00210571,-0.000732422,-0.00213623,-0.00219727,0.000427246,0.0045166,0.00448608,0.00320435,0.00161743,-0.00326538,-0.00799561,-0.00793457,-0.0055542,-0.00296021,-0.000915527,0.00125122,0.00314331,0.00210571,0.000793457,-0.00204468,-0.00183105,0.000457764,-0.00250244,-0.00317383,-0.00177002,0.00131226,0.00299072,0.000274658,0.000976562,0.000610352,0.000335693,0.0020752,0.000976562,-0.000823975,-0.00244141,-0.00415039,-0.00546265,-0.00631714,-0.0093689,-0.0110779,-0.00808716,-0.00308228,0.00112915,0.00274658,0.00369263,0.00500488,0.00820923,0.0106201,0.00939941,0.00613403,0.00439453,0.00424194,0.00305176,0.000488281,-0.00305176,-0.00515747,-0.00476074,-0.00253296,0.000518799,0.00238037,-0.00112915,-0.0043335,-0.00360107,-0.00134277,0.00341797,0.00485229,0.0043335,0.00387573,0.00161743,-0.00106812,-0.00427246,-0.00283813,-0.0010376,-0.00299072,-0.000274658,0.00222778,0.000976562,0.00296021,0.00335693,0.00146484,0.00314331,0.00112915,-0.00164795,0.00231934,0.00430298,0.00119019,-0.00216675,-0.00210571,-0.00134277,-0.00213623,-0.00268555,-0.00286865,-0.00262451,-0.00302124,-0.00259399,3.05176e-05,0.00170898,0.00125122,-0.000732422,-0.0010376,0.00262451,0.00299072,0.00131226,0.00228882,0.00244141,0.00186157,0.00100708,0.000366211,-0.00137329,-0.00131226,-0.000183105,-0.00250244,-0.0012207,0.00170898,0.00177002,0.00137329,0.00115967,0.00131226,0.000335693,0.0015564,0.00216675,3.05176e-05,0.000274658,-0.000335693,-0.000488281,0.00177002,0.00247192,-0.000823975,-0.00387573,-0.00317383,-0.00106812,0.0010376,0.000335693,-0.000823975,-0.00317383,-0.00317383,0.000579834,0.00149536,0.00289917,0.00247192,0.00143433,0.0032959,0.00332642,-6.10352e-05,-0.00198364,-0.00112915,-0.00216675,0.000732422,0.00354004,0.00314331,0.00314331,0.00180054,0.00234985,0.000976562,0.000976562,0.000701904,-0.00323486,-0.00408936,-0.00405884,-0.00378418,-0.0055542,-0.00506592,-0.00473022,-0.00488281,6.10352e-05,0.000549316,-0.000579834,0.0010376,0.000762939,0.00125122,0.00479126,0.0057373,0.00537109,0.00680542,0.00680542,0.00512695,0.00317383,0.00109863,-0.00192261,-0.00247192,-0.000976562,-0.000579834,-0.00146484,-0.00271606,-0.00143433,-0.000335693,-0.00152588,-0.000579834,0.00134277,0.00198364,0.000823975,0.0010376,0.0027771,0.00354004,0.00378418,0.0020752,0.000701904,-0.00149536,-0.00231934,-0.00222778,-0.0032959,-0.0022583,-0.000396729,-0.00119019,-0.00238037,0.00134277,0.00265503,0.000854492,-9.15527e-05,-0.00271606,-0.00375366,-0.00115967,0.000152588,0.000305176,0.00128174,0.00177002,0.0017395,-0.000640869,0.000427246,-6.10352e-05,-0.00454712,-0.00265503,0.00112915,0.00357056,0.00314331,0.00119019,0.000579834,0.00128174,0.00189209,-0.0017395,-0.00158691,9.15527e-05,-0.00216675,-0.000823975,-0.0020752,-0.00335693,-0.000183105,9.15527e-05,0.00299072,0.006073,0.0057373,0.00436401,3.05176e-05,-0.00396729,-0.00445557,-0.00192261,0.000549316,0.00100708,0.000946045,0.00363159,0.00698853,0.00408936,0.000579834,-0.000793457,-0.00378418,-0.00268555,-0.000610352,0.00137329,0.00247192,0.000579834,0.00167847,0.00299072,0.00265503,-0.000244141,-0.00219727,-0.0012207,-0.00109863,-0.00134277,-0.003479,-0.00341797,-0.00189209,-0.00219727,6.10352e-05,0.00222778,0.00137329,0.000915527,0.000854492,0.0022583,0.00515747,0.00125122,-0.00183105,0.00109863,-0.000305176,-0.00335693,-0.00512695,-0.00497437,-0.00341797,-0.00183105,0.00146484,0.00231934,0.0022583,0.00332642,0.00241089,0.0017395,-0.000152588,-0.000762939,0.00418091,0.00592041,0.00387573,0.00271606,-0.000427246,-0.00360107,-0.00259399,-0.00180054,-0.00164795,-0.000396729,0.000335693,0.00387573,0.00439453,-6.10352e-05,-0.000305176,0.00253296,0.00161743,0.00106812,0.00283813,-0.00012207,-0.00180054,0.00332642,0.00411987,-3.05176e-05,-0.0010376,-0.00491333,-0.00601196,-0.000244141,-0.000335693,-0.0015564,0.000274658,-0.000274658,-0.000183105,0.00088501,-0.00265503,-0.00653076,-0.00350952,0.000762939,0.00421143,0.00650024,0.00274658,-0.000366211,0.000396729,3.05176e-05,-0.00137329,-0.00262451,-0.00271606,-0.000244141,0.00210571,0.000854492,0.00115967,0.0010376,-0.000152588,0.00305176,0.00299072,0.00289917,0.00469971,0.00131226,-0.000610352,0,-0.000976562,-9.15527e-05,0.000762939,-0.000854492,-0.000946045,-0.000274658,-0.000579834,0.00183105,0.00271606,-0.000152588};
  static float buffer[irlength];
  
  static int count = 0;
  
  const float *impulsePos = ir;
  float *bufferPos = buffer;

  const float *endImpulse = ir + irlength;
  float *endBuffer = buffer + irlength;

  float outputSample;

  *( bufferPos += count ) = input;

  outputSample = *impulsePos++ * *bufferPos++;

  while (bufferPos < endBuffer)
  {
    outputSample += *impulsePos++ * *bufferPos++;
  }

  bufferPos -= irlength;

  while (impulsePos < endImpulse)
  {
    outputSample += *impulsePos++ * *bufferPos++;
  }

  if ((count -= 1) < 0)
  {
    count = irlength -1;
  }

  return outputSample;
}